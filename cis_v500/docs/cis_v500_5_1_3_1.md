## Description

A dynamic group is a dynamic configuration of security group membership for Microsoft Entra ID. Administrators can set rules to populate groups that are created in Entra ID based on user attributes (such as userType, department, or country/region). Members can be automatically added to or removed from a security group based on their attributes.

The recommended state is to create a dynamic group that includes guest accounts.

## Remediation

**To remediate using the UI:**

1. Navigate to `Microsoft Entra admin center` [https://entra.microsoft.com/](https://entra.microsoft.com/).
2. Click to expand `Identity` > `Groups` select `All groups`.
3. Select `New group` and assign the following values:
    - Group type: Security
    - Microsoft Entra roles can be assigned to the group: No
    - Membership type: Dynamic User
4. Select `Add dynamic query.`
5. Above the `Rule syntax` text box, select Edit.
6. Place the following expression in the box:

```
user.userType -eq "Guest"
```

7. Select `OK` and `Save`

**To remediate using PowerShell:**

1. Connect to Microsoft Graph using `Connect-MgGraph -Scopes "Group.ReadWrite.All"`.
2. In the script below edit `DisplayName` and `MailNickname` as needed and run:

```bash
$params = @{
    DisplayName = "All Guest Users"
    Description = "Dynamic group containing all guest users"
    MailEnabled = $false
    MailNickname = "allguestusers"
    SecurityEnabled = $true
    GroupTypes = @("DynamicMembership")
    MembershipRule = "(user.userType -eq ""Guest"")"
    MembershipRuleProcessingState = "On"
}
New-MgGroup @params
```

### Default Value

Undefined